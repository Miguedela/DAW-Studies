<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script>
      // Creación de los objetos literales cuenta1 y cuenta2 con métodos propios
      const cuenta1 = {
        titular: "Javier",
        saldo: 3000,
        ingresar: function (cantidad) {
          this.saldo += cantidad;
        },
        extraer: function (cantidad) {
          if (cantidad <= this.saldo) {
            this.saldo -= cantidad;
          } else {
            throw new Error("Saldo insuficiente.");
          }
        },
        transferir: function (cuenta, cantidad) {
          if (cantidad <= this.saldo) {
            this.extraer(cantidad);
            cuenta.ingresar(cantidad);
          } else {
            console.log("Saldo insuficiente para la transferencia");
          }
        },
        toString: function () {
          return `Titular: ${this.titular}, Saldo: ${this.saldo}€`;
        },
      };

      const cuenta2 = {
        titular: "Rocío",
        saldo: 5000,
        ingresar: function (cantidad) {
          this.saldo += cantidad;
        },
        extraer: function (cantidad) {
          if (cantidad <= this.saldo) {
            this.saldo -= cantidad;
          } else {
            throw new Error("Saldo insuficiente.");
          }
        },
        transferir: function (cuenta, cantidad) {
          if (cantidad <= this.saldo) {
            this.extraer(cantidad);
            cuenta.ingresar(cantidad);
          } else {
            console.log("Saldo insuficiente para la transferencia");
          }
        },
        toString: function () {
          return `Titular: ${this.titular}, Saldo: ${this.saldo}€`;
        },
      };

      // Testeo de transferencia de 500€ desde cuenta1 a cuenta2
      console.log(
        "-----------------------Cuentas creadas-----------------------"
      );
      console.log(cuenta1.toString());
      console.log(cuenta2.toString());
      cuenta1.transferir(cuenta2, 500);
      console.log(
        "-----------------------Cuentas despues de la transferencia-----------------------"
      );
      console.log(cuenta1.toString());
      console.log(cuenta2.toString());

      // Creación del array de cuentas con varios objetos literales directamente
      const cuentas = [
        {
          titular: "Carlos",
          saldo: 10000,
          ingresar: function (cantidad) {
            this.saldo += cantidad;
          },
          extraer: function (cantidad) {
            if (cantidad <= this.saldo) {
              this.saldo -= cantidad;
            } else {
              throw new Error("Saldo insuficiente.");
            }
          },
          transferir: function (cuenta, cantidad) {
            cantidad <= this.saldo
              ? (this.extraer(cantidad), cuenta.ingresar(cantidad))
              : console.log("Saldo insuficiente");
          },
          toString: function () {
            return `Titular: ${this.titular}, Saldo: ${this.saldo}€`;
          },
        },
        {
          titular: "Lidia",
          saldo: 12500,
          ingresar: function (cantidad) {
            this.saldo += cantidad;
          },
          extraer: function (cantidad) {
            if (cantidad <= this.saldo) {
              this.saldo -= cantidad;
            } else {
              throw new Error("Saldo insuficiente.");
            }
          },
          transferir: function (cuenta, cantidad) {
            cantidad <= this.saldo
              ? (this.extraer(cantidad), cuenta.ingresar(cantidad))
              : console.log("Saldo insuficiente");
          },
          toString: function () {
            return `Titular: ${this.titular}, Saldo: ${this.saldo}€`;
          },
        },
        {
          titular: "Alicia",
          saldo: 8500,
          ingresar: function (cantidad) {
            this.saldo += cantidad;
          },
          extraer: function (cantidad) {
            if (cantidad <= this.saldo) {
              this.saldo -= cantidad;
            } else {
              throw new Error("Saldo insuficiente.");
            }
          },
          transferir: function (cuenta, cantidad) {
            cantidad <= this.saldo
              ? (this.extraer(cantidad), cuenta.ingresar(cantidad))
              : console.log("Saldo insuficiente");
          },
          toString: function () {
            return `Titular: ${this.titular}, Saldo: ${this.saldo}€`;
          },
        },
        {
          titular: "Felipe",
          saldo: 9000,
          ingresar: function (cantidad) {
            this.saldo += cantidad;
          },
          extraer: function (cantidad) {
            if (cantidad <= this.saldo) {
              this.saldo -= cantidad;
            } else {
              throw new Error("Saldo insuficiente.");
            }
          },
          transferir: function (cuenta, cantidad) {
            cantidad <= this.saldo
              ? (this.extraer(cantidad), cuenta.ingresar(cantidad))
              : console.log("Saldo insuficiente");
          },
          toString: function () {
            return `Titular: ${this.titular}, Saldo: ${this.saldo}€`;
          },
        },
      ];

      console.log(
        "-----------------------Array sin ordenar-----------------------"
      );
      cuentas.forEach((cuenta) => console.log(cuenta.toString())); // Muestro el array

      // Ordeno de menor a mayor
      cuentas.sort((a, b) => {
        if (a.saldo < b.saldo) {
          return -1;
        } else {
          return 1;
        }
      });

      console.log(
        "-----------------------Array ordenado-----------------------"
      );
      cuentas.forEach((cuenta) => console.log(cuenta.toString())); // Muestro el array nuevamente

      console.log(
        "-----------------------------Error de extraer-----------------------------"
      );
      try {
        cuenta1.extraer(2501);
      } catch (e) {
        console.log(e);
      }
    </script>
  </head>
  <body>
    <h1>Ejercicios clase Banco y cuentas bancarias</h1>
    <h2>Pulsa F12 para ver la consola de depuración</h2>
  </body>
</html>
