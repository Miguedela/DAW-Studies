<!--



-->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    Escribe un código postal: <input type="text" id="expresionA">
    <p id="textA"></p>

    Escribe frases que contengan códigos postales: <input type="text" id="expresionB">
    <p id="textB"></p>

    Escribe frases que contengan códigos postales: <input type="text" id="expresionC">
    <p id="textC"></p>

    <!-- SCRIPT -->
    <script>
        addEventListener('load', inicio);

        function inicio() {
            const botonA = document.getElementById('expresionA');
            botonA.addEventListener('keyup', valicarCP);

            const botonB = document.getElementById('expresionB');
            botonB.addEventListener('blur', extraeCPs);


            const botonC = document.getElementById('expresionC');
            botonC.addEventListener('blur', sustituyeCPs);
        }

        // EXPRESIONES
        // A. Crea una función llamada validaCP que valide si un código postal es válido, retornando
        // true en caso afirmativo.El código postal podrá tener opcionalmente espacios por delante
        // o por detrás.Haz un testeo de la función.
        function valicarCP(evt) {
            let expresionA = /^\s*\d{5}\s*$/;

            let texto = evt.target.value;
            let parrafo = document.getElementById('textA');

            parrafo.innerHTML = expresionA.test(texto);

            return expresionA.test(texto);
        }

        // B.Crea una función llamada extraeCPs que tenga como argumento de entrada una frase que
        // contenga códigos postales.La función debe devolver un array con todos los códigos
        // postales encontrados.Haz un testeo de la función.
        function extraeCPs(evt) {
            let texto = evt.target.value;
            let regex = /\b\d{5}\b/g;
            let parrafo = document.getElementById('textB');

            let codigosPostales = texto.match(regex);

            if (!codigosPostales) {
                codigosPostales = [];
            }

            parrafo.innerHTML = codigosPostales;

            return codigosPostales;
        }

        // C.Crea una función llamada sustituyeCPs que tenga como argumento de entrada una frase que
        // contenga códigos postales.La función debe devolver la frase de entrada sustituyendo
        // todos los códigos postales por la palabra C.P.Haz un testeo de la función.
        function sustituyeCPs(evt) {
            let texto = evt.target.value;
            let regex = /\b\d{5}\b/g;
            let parrafo = document.getElementById('textC');

            let codigosPostales = texto.replaceAll(regex, 'C.P');

            if (!codigosPostales) {
                codigosPostales = [];
            }

            parrafo.innerHTML = codigosPostales;

            return codigosPostales;
        }
    </script>
</body>

</html>